{
 "annotations": {
 "list": [
 {
 "builtIn": 1,
 "datasource": {
 "type": "grafana",
 "uid": "-- Grafana --"
 },
 "enable": true,
 "hide": true,
 "iconColor": "rgba(0, 211, 255, 1)",
 "name": "Annotations & Alerts",
 "type": "dashboard"
 }
 ]
 },
 "editable": true,
 "fiscalYearStartMonth": 0,
 "graphTooltip": 0,
 "links": [],
 "panels": [
 {
 "datasource": {
 "type": "prometheus",
 "uid": "VictoriaMetrics"
 },
 "fieldConfig": {
 "defaults": {
 "color": {
 "mode": "palette-classic"
 },
 "custom": {
 "axisBorderShow": false,
 "axisCenteredZero": false,
 "axisColorMode": "text",
 "axisLabel": "",
 "axisPlacement": "auto",
 "barAlignment": 0,
 "barWidthFactor": 0.6,
 "drawStyle": "line",
 "fillOpacity": 0,
 "gradientMode": "none",
 "hideFrom": {
 "legend": false,
 "tooltip": false,
 "viz": false
 },
 "insertNulls": false,
 "lineInterpolation": "linear",
 "lineWidth": 1,
 "pointSize": 5,
 "scaleDistribution": {
 "type": "linear"
 },
 "showPoints": "auto",
 "showValues": false,
 "spanNulls": false,
 "stacking": {
 "group": "A",
 "mode": "none"
 },
 "thresholdsStyle": {
 "mode": "off"
 }
 },
 "mappings": [],
 "thresholds": {
 "mode": "absolute",
 "steps": [
 {
 "color": "green",
 "value": 0
 },
 {
 "color": "red",
 "value": 80
 }
 ]
 }
 },
 "overrides": []
 },
 "gridPos": {
 "h": 8,
 "w": 12,
 "x": 0,
 "y": 0
 },
 "id": 1,
 "options": {
 "legend": {
 "calcs": [],
 "displayMode": "list",
 "placement": "bottom",
 "showLegend": true
 },
 "tooltip": {
 "hideZeros": false,
 "mode": "single",
 "sort": "none"
 }
 },
 "pluginVersion": "12.3.0",
 "targets": [
 {
 "datasource": {
 "type": "prometheus",
 "uid": "VictoriaMetrics"
 },
 "editorMode": "code",
 "expr": "rate(app_requests_total{service=~\"${service:regex}\"}[$__rate_interval])",
 "legendFormat": "{{service}} - {{method}} {{endpoint}}",
 "range": true,
 "refId": "A"
 }
 ],
 "title": "Request Rate",
 "type": "timeseries"
 },
 {
 "datasource": {
 "type": "prometheus",
 "uid": "VictoriaMetrics"
 },
 "fieldConfig": {
 "defaults": {
 "color": {
 "mode": "palette-classic"
 },
 "custom": {
 "axisBorderShow": false,
 "axisCenteredZero": false,
 "axisColorMode": "text",
 "axisLabel": "",
 "axisPlacement": "auto",
 "barAlignment": 0,
 "barWidthFactor": 0.6,
 "drawStyle": "line",
 "fillOpacity": 0,
 "gradientMode": "none",
 "hideFrom": {
 "legend": false,
 "tooltip": false,
 "viz": false
 },
 "insertNulls": false,
 "lineInterpolation": "linear",
 "lineWidth": 1,
 "pointSize": 5,
 "scaleDistribution": {
 "type": "linear"
 },
 "showPoints": "auto",
 "showValues": false,
 "spanNulls": false,
 "stacking": {
 "group": "A",
 "mode": "none"
 },
 "thresholdsStyle": {
 "mode": "off"
 }
 },
 "mappings": [],
 "thresholds": {
 "mode": "absolute",
 "steps": [
 {
 "color": "green",
 "value": 0
 },
 {
 "color": "red",
 "value": 80
 }
 ]
 }
 },
 "overrides": []
 },
 "gridPos": {
 "h": 8,
 "w": 12,
 "x": 12,
 "y": 0
 },
 "id": 2,
 "options": {
 "legend": {
 "calcs": [],
 "displayMode": "list",
 "placement": "bottom",
 "showLegend": true
 },
 "tooltip": {
 "hideZeros": false,
 "mode": "single",
 "sort": "none"
 }
 },
 "pluginVersion": "12.3.0",
 "targets": [
 {
 "datasource": {
 "type": "prometheus",
 "uid": "VictoriaMetrics"
 },
 "editorMode": "code",
 "expr": "histogram_quantile(0.95, sum(rate(app_request_latency_seconds_bucket{service=~\"${service:regex}\"}[$__rate_interval])) by (le, service))",
 "legendFormat": "{{service}} - p95 Latency",
 "range": true,
 "refId": "A"
 }
 ],
 "title": "Latency (p95)",
 "type": "timeseries"
 },
 {
 "datasource": {
 "type": "victoriametrics-logs-datasource",
 "uid": "VictoriaLogs"
 },
 "fieldConfig": {
 "defaults": {},
 "overrides": []
 },
 "gridPos": {
 "h": 8,
 "w": 12,
 "x": 0,
 "y": 8
 },
 "id": 3,
 "options": {
 "dedupStrategy": "none",
 "enableInfiniteScrolling": false,
 "enableLogDetails": true,
 "prettifyLogMessage": false,
 "showCommonLabels": false,
 "showControls": false,
 "showLabels": false,
 "showTime": true,
 "sortOrder": "Descending",
 "wrapLogMessage": true
 },
 "pluginVersion": "12.3.0",
 "targets": [
 {
 "datasource": {
 "type": "victoriametrics-logs-datasource",
 "uid": "VictoriaLogs"
 },
 "editorMode": "code",
 "expr": "service:re(\"${service:regex}\") AND trace_id:${trace_id:raw} AND _msg:${log_search:raw}",
 "queryType": "instant",
 "refId": "A"
 }
 ],
 "title": "Logs",
 "type": "logs"
 },
 {
 "datasource": {
 "type": "jaeger",
 "uid": "VictoriaTraces"
 },
 "fieldConfig": {
 "defaults": {},
 "overrides": [
 {
 "matcher": {
 "id": "byName",
 "options": "traceID"
 },
 "properties": [
 {
 "id": "links",
 "value": [
 {
 "includeVars": true,
 "title": "View Trace",
 "url": "/d/main-dashboard/main-dashboard?${__url_time_range}&var-trace_id=${__value.raw}"
 }
 ]
 }
 ]
 }
 ]
 },
 "gridPos": {
 "h": 8,
 "w": 12,
 "x": 12,
 "y": 8
 },
 "id": 4,
 "options": {
 "limit": 20,
 "spanFilters": {
 "criticalPathOnly": false,
 "matchesOnly": false,
 "serviceNameOperator": "=",
 "spanNameOperator": "="
 }
 },
 "pluginVersion": "12.3.0",
 "targets": [
 {
 "datasource": {
 "type": "jaeger",
 "uid": "VictoriaTraces"
 },
 "queryType": "search",
 "refId": "A",
 "service": "${trace_service}",
 "minDuration": "0ms"
 }
 ],
 "title": "Recent Traces",
 "type": "table"
 },
 {
 "datasource": {
 "default": false,
 "type": "jaeger",
 "uid": "VictoriaTraces"
 },
 "gridPos": {
"h": 24,
"w": 24,
"x": 0,
 "y": 16
 },
 "id": 5,
 "options": {
 "limit": 1
 },
 "pluginVersion": "12.3.0",
 "targets": [
 {
 "datasource": {
 "type": "jaeger",
 "uid": "VictoriaTraces"
 },
 "queryType": "traceID",
 "query": "${trace_id}",
 "refId": "A",
 "traceID": "${trace_id}"
 }
 ],
 "title": "Selected Trace",
 "type": "traces"
 }
 ],
 "preload": false,
 "refresh": "5s",
 "schemaVersion": 42,
 "tags": [],
 "templating": {
 "list": [
 {
 "current": {
 "selected": true,
 "text": "*",
 "value": "*"
 },
 "hide": 0,
 "label": "Trace ID",
 "name": "trace_id",
 "options": [],
 "query": "",
 "skipUrlSync": false,
 "type": "textbox"
 },
 {
 "current": {
 "selected": true,
 "text": "*",
 "value": "*"
 },
 "hide": 0,
 "label": "Log Search",
 "name": "log_search",
 "options": [],
 "query": "",
 "skipUrlSync": false,
 "type": "textbox"
 },
 {
 "current": {
 "text": "All",
 "value": "$__all"
 },
 "hide": 0,
 "label": "Service",
 "multi": true,
 "name": "service",
 "options": [
 {
 "selected": true,
 "text": "All",
 "value": "$__all"
 },
 {
 "selected": false,
 "text": "service-a",
 "value": "service-a"
 },
 {
 "selected": false,
 "text": "service-b",
 "value": "service-b"
 }
 ],
 "query": "service-a, service-b",
 "type": "custom",
 "includeAll": true,
 "allValue": ".*"
 },
 {
 "datasource": {
 "type": "prometheus",
 "uid": "VictoriaMetrics"
 },
 "definition": "label_values(app_requests_total{service=~\"$service\"}, service)",
 "hide": 0,
 "includeAll": false,
 "label": "Trace Service",
 "multi": false,
 "name": "trace_service",
 "options": [],
 "query": {
 "query": "label_values(app_requests_total{service=~\"$service\"}, service)",
 "refId": "VictoriaMetrics-trace_service-Variable-Query"
 },
 "refresh": 1,
 "regex": "",
 "skipUrlSync": false,
 "sort": 0,
 "type": "query"
 }
 ]
 },
 "time": {
 "from": "now-15m",
 "to": "now"
 },
 "timepicker": {},
 "timezone": "",
 "title": "Main Dashboard",
 "uid": "main-dashboard",
 "version": 1000
}
